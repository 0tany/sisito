version: '2'
services:
  sisito:
    build:
      context: .
      dockerfile: Dockerfile.sisito
    ports:
     - '3000:3000'
    depends_on:
      - mysql
    links:
      - mysql
  mysql:
    image: 'mysql:5.6'
    environment:
      - MYSQL_ALLOW_EMPTY_PASSWORD=1
      - TZ=Asia/Tokyo
  postfix:
    build:
      context: .
      dockerfile: Dockerfile.postfix
    depends_on:
      - sisito
      - mysql
    links:
      - sisito
      - mysql
  sisito_api:
    build:
      context: .
      dockerfile: Dockerfile.sisito-api
    ports:
     - '8080:8080'
    depends_on:
      - mysql
    links:
      - mysql
